<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정산 내역 조회</title>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            background-color: #F7F7F7; /* 배경색 */
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 600px;
            margin: 100px auto; /* 중앙 정렬 */
            padding: 20px;
            background-color: white; /* 카드 배경색 */
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            text-align: center;
            color: #4A4A4A; /* 제목 색상 */
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #D9D9D9; /* 테두리 색상 */
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #FFD600; /* 헤더 배경색 */
            color: white; /* 헤더 글씨 색상 */
        }
        button {
            width: 100%;
            padding: 12px;
            margin-top: 20px;
            border: none;
            border-radius: 5px;
            background-color: #FFD600; /* 버튼 배경색 */
            color: white; /* 버튼 글씨 색상 */
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #FFC107; /* 버튼 호버 색상 */
        }
        p {
            text-align: center;
            color: #4A4A4A; /* 텍스트 색상 */
        }
    </style>
</head>
<body>

<div class="container">
    <h2>저장된 정산 내역</h2>
    <table id="historyTable">
        <thead>
            <tr>
                <th>총 금액</th>
                <th>참여자 수</th>
                <th>각 참여자 부담 금액</th>
            </tr>
        </thead>
        <tbody>
            <!-- 저장된 내역이 여기에 표시됩니다. -->
        </tbody>
    </table>
    <button onclick="clearHistory()">내역 초기화</button>
    <button onclick="goBack()">뒤로가기</button> <!-- 뒤로가기 버튼 추가 -->
</div>

<script>
    // 페이지 로드 시 저장된 정산 내역을 불러옵니다.
    window.onload = function() {
        loadHistory();
    };

    function loadHistory() {
        const currentUser = localStorage.getItem('currentUser');
        const histories = JSON.parse(localStorage.getItem(currentUser + 'Histories')) || [];
        const tbody = document.getElementById('historyTable').getElementsByTagName('tbody')[0];

        histories.forEach(history => {
            const row = tbody.insertRow();
            row.insertCell(0).innerText = history.totalAmount + ' 원';
            row.insertCell(1).innerText = history.numberOfParticipants + ' 명';
            row.insertCell(2).innerText = history.share + ' 원';
        });
    }

    function clearHistory() {
        const currentUser = localStorage.getItem('currentUser');
        localStorage.removeItem(currentUser + 'Histories');
        document.getElementById('historyTable').getElementsByTagName('tbody')[0].innerHTML = '';
        alert('정산 내역이 초기화되었습니다.');
    }

    function goBack() {
        window.location.href = 'settlement.html'; // 정산 페이지로 이동
    }
</script>

</body>
</html>
